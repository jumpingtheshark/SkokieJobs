package main

import (
	"fmt"
	"net/http"
	"strconv"
	"strings"
)

func ShowJob(w http.ResponseWriter, r *http.Request) {

	w.Header().Set("Content-Type", "text/html; charset=utf-8")
	parts := strings.Split(r.URL.Path, "/")
	length := len(parts)
	id := parts[length-1]
	//fmt.Fprintf(w, id)
	query := "select * from jobs.dbo.jobs where id =" + id

	rows := getRows(query)
	fmt.Fprintf(w, "<html><body>")
	for rows.Next() {
		var id int
		var jobTitle string
		var jobDescription string
		var email string
		rows.Scan(&id, &jobTitle, &jobDescription, &email)

		fmt.Fprintf(w, strconv.Itoa(id)+"<br>")
		fmt.Fprintf(w, jobTitle+"<br>")
		fmt.Fprintf(w, jobDescription+"<br>")
		fmt.Fprintf(w, email)

	}
	fmt.Fprintf(w, "</body></html>")
	/*
		fmt.Fprintf(w, id)
		fmt.Println(length)
		fmt.Println(parts)
		fmt.Println(r.URL.Path)
		fmt.Println(r.URL.RawQuery)
		fmt.Println(r.URL.Scheme)
		fmt.Println(r.URL.Host)
		fmt.Println(r.URL.Path)
		fmt.Println(r.URL.RequestURI())
	*/

}
